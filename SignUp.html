<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>English Learning Platform - Authentication</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    * { font-family: 'Poppins', sans-serif; box-sizing: border-box; }
    html, body { height: 100%; margin: 0; padding: 0; }
    
    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
      animation: gradientShift 8s ease infinite;
      background-size: 200% 200%;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(40px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInScale {
      from {
        opacity: 0;
        transform: scale(0.95);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    .auth-card {
      animation: slideInUp 0.6s ease-out, fadeInScale 0.6s ease-out;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    .input-field {
      transition: all 0.3s ease;
    }

    .input-field:focus {
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(102, 126, 234, 0.2);
    }

    .submit-btn {
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .submit-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 24px rgba(102, 126, 234, 0.4);
    }

    .submit-btn:active {
      transform: translateY(-1px);
    }

    .toggle-text {
      cursor: pointer;
      transition: color 0.3s ease;
      text-decoration: underline;
    }

    .toggle-text:hover {
      color: #667eea;
    }

    .error-message {
      animation: slideInUp 0.3s ease-out;
      color: #ef4444;
      font-size: 0.875rem;
    }

    .success-message {
      animation: slideInUp 0.3s ease-out;
      color: #10b981;
      font-size: 0.875rem;
    }

    .form-group {
      position: relative;
      margin-bottom: 1.5rem;
    }

    .label-text {
      font-weight: 600;
      color: #1f2937;
      display: block;
      margin-bottom: 0.5rem;
      font-size: 0.95rem;
    }

    .input-field {
      width: 100%;
      padding: 0.875rem 1.25rem;
      border: 2px solid #e5e7eb;
      border-radius: 0.75rem;
      font-size: 1rem;
      background: white;
    }

    .input-field::placeholder {
      color: #9ca3af;
    }

    .logo-section {
      text-align: center;
      margin-bottom: 2rem;
    }

    .logo-icon {
      font-size: 3rem;
      margin-bottom: 0.75rem;
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
    }

    .divider-line {
      height: 1px;
      background: linear-gradient(90deg, transparent, #d1d5db, transparent);
      margin: 1.5rem 0;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full w-full flex items-center justify-center p-4">
  <div class="w-full max-w-md auth-card bg-white rounded-3xl p-8"><!-- Logo Section -->
   <div class="logo-section">
    <div class="logo-icon">
     ðŸ“š
    </div>
    <h1 class="text-3xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">Learn English</h1>
    <p class="text-gray-500 text-sm mt-2">Master language skills with confidence</p>
   </div><!-- Form Container -->
   <div id="auth-form-container"><!-- Sign In Form (Initial) -->
    <form id="signin-form" class="space-y-5">
     <h2 class="text-2xl font-bold text-gray-800 mb-6">Welcome Back</h2>
     <div class="form-group"><label class="label-text">Email Address</label> <input id="signin-email" type="email" placeholder="you@example.com" class="input-field" required>
      <div id="signin-email-error" class="error-message mt-1"></div>
     </div>
     <div class="form-group"><label class="label-text">Password</label> <input id="signin-password" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" class="input-field" required>
      <div id="signin-password-error" class="error-message mt-1"></div>
     </div>
     <div id="signin-general-error" class="error-message text-center"></div><button type="submit" class="submit-btn w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white font-bold py-3 rounded-lg mt-6"> Sign In </button>
     <div class="divider-line"></div>
<p class="text-center text-gray-600 text-sm">
  Don't have an account? 
  <span onclick="toggleAuthForm()" class="toggle-text font-semibold text-indigo-600 cursor-pointer">Create one</span>
</p>
</form><!-- Sign Up Form (Hidden Initially) -->
    <form id="signup-form" class="space-y-5 hidden">
     <h2 class="text-2xl font-bold text-gray-800 mb-6">Create Account</h2>
     <div class="form-group"><label class="label-text">Full Name</label> <input id="signup-name" type="text" placeholder="John Doe" class="input-field" required>
      <div id="signup-name-error" class="error-message mt-1"></div>
     </div>
     <div class="form-group"><label class="label-text">Email Address</label> <input id="signup-email" type="email" placeholder="you@example.com" class="input-field" required>
      <div id="signup-email-error" class="error-message mt-1"></div>
     </div>
     <div class="form-group"><label class="label-text">Password</label> <input id="signup-password" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" class="input-field" required>
      <div id="signup-password-error" class="error-message mt-1"></div>
     </div>
     <div class="form-group"><label class="label-text">Confirm Password</label> <input id="signup-confirm-password" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" class="input-field" required>
      <div id="signup-confirm-error" class="error-message mt-1"></div>
     </div>
     <div id="signup-general-error" class="error-message text-center"></div>
     <div id="signup-success" class="success-message text-center"></div><button type="submit" class="submit-btn w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white font-bold py-3 rounded-lg mt-6"> Create Account </button>
     <div class="divider-line"></div>
     <p class="text-center text-gray-600 text-sm">
  Already have an account? 
  <span onclick="toggleAuthForm()" class="toggle-text font-semibold text-indigo-600 cursor-pointer">Sign in</span> </p>
    </form>
   </div>
  </div>
  <script>
  // à¦à¦–à¦¾à¦¨à§‡ à¦†à¦ªà¦¨à¦¾à¦° à¦—à§à¦—à¦² à¦…à§à¦¯à¦¾à¦ªà¦¸ à¦¸à§à¦•à§à¦°à¦¿à¦ªà§à¦Ÿà§‡à¦° URL à¦Ÿà¦¿ à¦¬à¦¸à¦¾à¦¬à§‡à¦¨
  const SCRIPT_URL = "https://script.google.com/macros/s/AKfycby81wpumSVc0j8swHn7a9p8r2ACFoVJNF2Se9NbtjlLOtrRQut7U2uo6U37kVoQ5Ck9_Q/exec"; 

  // à¦à¦°à¦ªà¦° à¦†à¦ªà¦¨à¦¾à¦° à¦¬à¦¾à¦•à¦¿ à¦¸à¦¬ à¦«à¦¾à¦‚à¦¶à¦¨ à¦¶à§à¦°à§ à¦¹à¦¬à§‡...
  document.getElementById('signup-form').addEventListener('submit', (e) => {
      // à¦†à¦ªà¦¨à¦¾à¦° à¦†à¦—à§‡à¦° à¦•à§‹à¦¡à¦—à§à¦²à§‹ à¦à¦–à¦¾à¦¨à§‡ à¦¥à¦¾à¦•à¦¬à§‡...

    // ============================================
    // AUTO-LOGIN CHECK (Runs on Page Load)
    // ============================================
    window.addEventListener('DOMContentLoaded', () => {
      const isLoggedIn = localStorage.getItem('isLoggedIn');
      if (isLoggedIn === 'true') {
        window.location.href = 'course.html';
      }
    });

    // ============================================
    // AUTHENTICATION LOGIC
    // ============================================
    
    function toggleAuthForm() {
      const signinForm = document.getElementById('signin-form');
      const signupForm = document.getElementById('signup-form');
      
      signinForm.classList.toggle('hidden');
      signupForm.classList.toggle('hidden');
      
      clearAllErrors();
    }

    function clearAllErrors() {
      document.querySelectorAll('.error-message').forEach(el => el.textContent = '');
      document.getElementById('signup-success').textContent = '';
    }

    // ============================================
    // SIGN UP HANDLER
    // ============================================
    document.getElementById('signup-form').addEventListener('submit', (e) => {
      e.preventDefault();
      clearAllErrors();

      const fullName = document.getElementById('signup-name').value.trim();
      const email = document.getElementById('signup-email').value.trim();
      const password = document.getElementById('signup-password').value;
      const confirmPassword = document.getElementById('signup-confirm-password').value;

      let isValid = true;

      // Validation
      if (!fullName || fullName.length < 3) {
        document.getElementById('signup-name-error').textContent = 'Full name must be at least 3 characters';
        isValid = false;
      }

      if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        document.getElementById('signup-email-error').textContent = 'Please enter a valid email address';
        isValid = false;
      }

      if (localStorage.getItem(email)) {
        document.getElementById('signup-email-error').textContent = 'Email already registered. Try signing in!';
        isValid = false;
      }

      if (!password || password.length < 6) {
        document.getElementById('signup-password-error').textContent = 'Password must be at least 6 characters';
        isValid = false;
      }

      if (password !== confirmPassword) {
        document.getElementById('signup-confirm-error').textContent = 'Passwords do not match';
        isValid = false;
      }

      if (!isValid) return;

      // Store user data
      // --- à¦à¦‡ à¦…à¦‚à¦¶à¦Ÿà§à¦•à§ à¦†à¦ªà¦¨à¦¾à¦° à¦¸à¦¾à¦‡à¦¨-à¦†à¦ª à¦¸à¦¾à¦¬à¦®à¦¿à¦Ÿ à¦‡à¦­à§‡à¦¨à§à¦Ÿà§‡à¦° à¦­à§‡à¦¤à¦°à§‡ à¦¬à¦¸à¦¬à§‡ ---

const userData = {
    action: 'signup', // à¦†à¦®à¦°à¦¾ à¦—à§à¦—à¦² à¦¸à§à¦•à§à¦°à¦¿à¦ªà§à¦Ÿà¦•à§‡ à¦¬à¦²à¦›à¦¿ à¦à¦Ÿà¦¾ à¦¸à¦¾à¦‡à¦¨ à¦†à¦ª
    name: fullName,
    email: email,
    password: password
};

// à¦—à§à¦—à¦² à¦¶à¦¿à¦Ÿà§‡ à¦¡à¦¾à¦Ÿà¦¾ à¦ªà¦¾à¦ à¦¾à¦¨à§‹ à¦¶à§à¦°à§
fetch(SCRIPT_URL, {
    method: 'POST',
    mode: 'no-cors', // à¦—à§à¦—à¦² à¦¶à¦¿à¦Ÿà§‡à¦° à¦œà¦¨à§à¦¯ à¦à¦Ÿà¦¿ à¦ªà§à¦°à§Ÿà§‹à¦œà¦¨ à¦¹à¦¤à§‡ à¦ªà¦¾à¦°à§‡
    cache: 'no-cache',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(userData)
})
.then(() => {
    // à¦¸à¦«à¦² à¦¹à¦²à§‡ à¦®à§‡à¦¸à§‡à¦œ à¦¦à§‡à¦–à¦¾à¦¬à§‡
    document.getElementById('signup-success').textContent = 'âœ“ Account created in Google Sheet! Redirecting...';
    
    // à¦¬à§à¦°à¦¾à¦‰à¦œà¦¾à¦°à§‡à¦“ à¦¤à¦¥à§à¦¯ à¦°à¦¾à¦–à¦¾ à¦¯à¦¾à¦¤à§‡ à¦¸à§‡ à¦¸à¦¾à¦¥à§‡ à¦¸à¦¾à¦¥à§‡ à¦²à¦—à¦‡à¦¨ à¦¹à¦¤à§‡ à¦ªà¦¾à¦°à§‡
    localStorage.setItem('isLoggedIn', 'true');
    localStorage.setItem('currentUser', email);
    
    setTimeout(() => {
        window.location.href = 'course.html';
    }, 1500);
})
.catch(error => {
    document.getElementById('signup-general-error').textContent = 'Error: ' + error.message;
});

    // ============================================
    // SIGN IN HANDLER
    // ============================================
    document.getElementById('signin-form').addEventListener('submit', (e) => {
      e.preventDefault();
      clearAllErrors();

      const email = document.getElementById('signin-email').value.trim();
      const password = document.getElementById('signin-password').value;

      let isValid = true;

      if (!email) {
        document.getElementById('signin-email-error').textContent = 'Email is required';
        isValid = false;
      }

      if (!password) {
        document.getElementById('signin-password-error').textContent = 'Password is required';
        isValid = false;
      }

      if (!isValid) return;

      // Check if user exists
      const userData = localStorage.getItem(email);
      
      if (!userData) {
        document.getElementById('signin-general-error').textContent = 'âœ— Email not found. Please sign up first.';
        return;
      }

      const user = JSON.parse(userData);

      // Verify password
      if (user.password !== password) {
        document.getElementById('signin-password-error').textContent = 'Incorrect password';
        return;
      }

      // Login successful
      localStorage.setItem('isLoggedIn', 'true');
      localStorage.setItem('currentUser', email);
      
      window.location.href = 'course.html';
    });

    // ============================================
    // SIGN OUT FUNCTION (For Other Pages)
    // ===========================================
    // à§§. à¦ªà§‡à¦œ à¦²à§‹à¦¡ à¦¹à¦“à§Ÿà¦¾à¦° à¦¸à¦®à§Ÿ à¦šà§‡à¦•: à¦‡à¦‰à¦œà¦¾à¦° à¦•à¦¿ à¦…à¦²à¦°à§‡à¦¡à¦¿ à¦²à¦—à¦‡à¦¨ à¦•à¦°à¦¾?
    // à¦¯à¦¦à¦¿ à¦¥à¦¾à¦•à§‡, à¦¤à¦¬à§‡ à¦¤à¦¾à¦•à§‡ à¦¸à¦°à¦¾à¦¸à¦°à¦¿ à¦•à§‹à¦°à§à¦¸ à¦ªà§‡à¦œà§‡ à¦ªà¦¾à¦ à¦¿à§Ÿà§‡ à¦¦à¦¾à¦“à¥¤
    (function() {
      const isLoggedIn = localStorage.getItem('isLoggedIn');
      if (isLoggedIn === 'true') {
        window.location.replace('course.html');
      }
    })();

    // à§¨. à¦¸à¦¾à¦‡à¦¨ à¦†à¦‰à¦Ÿ à¦«à¦¾à¦‚à¦¶à¦¨
    function signOut() {
      localStorage.removeItem('isLoggedIn');
      localStorage.removeItem('currentUser');
      window.location.href = 'index.html';
    }

    // à§©. à¦Ÿà¦—à¦² à¦«à¦°à§à¦® (Sign In / Sign Up switching)
    function toggleAuthForm() {
      const signinForm = document.getElementById('signin-form');
      const signupForm = document.getElementById('signup-form');
      signinForm.classList.toggle('hidden');
      signupForm.classList.toggle('hidden');
      clearAllErrors();
    }

    function clearAllErrors() {
      document.querySelectorAll('.error-message').forEach(el => el.textContent = '');
      const successMsg = document.getElementById('signup-success');
      if(successMsg) successMsg.textContent = '';
    }

    // à§ª. à¦¸à¦¾à¦‡à¦¨ à¦‡à¦¨ à¦¹à§à¦¯à¦¾à¦¨à§à¦¡à¦²à¦¾à¦° (à¦²à¦—à¦‡à¦¨ à¦¬à¦¾à¦Ÿà¦¨ à¦šà¦¾à¦ªà¦²à§‡ à¦¯à¦¾ à¦¹à¦¬à§‡)
    document.getElementById('signin-form').addEventListener('submit', (e) => {
      e.preventDefault();
      const email = document.getElementById('signin-email').value.trim();
      const password = document.getElementById('signin-password').value;

      const userData = localStorage.getItem(email);
      if (!userData) {
        document.getElementById('signin-general-error').textContent = 'âœ— à¦‡à¦‰à¦œà¦¾à¦° à¦ªà¦¾à¦“à§Ÿà¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿à¥¤ à¦¦à§Ÿà¦¾ à¦•à¦°à§‡ à¦¸à¦¾à¦‡à¦¨ à¦†à¦ª à¦•à¦°à§à¦¨à¥¤';
        return;
      }

      const user = JSON.parse(userData);
      if (user.password !== password) {
        document.getElementById('signin-password-error').textContent = 'à¦­à§à¦² à¦ªà¦¾à¦¸à¦“à§Ÿà¦¾à¦°à§à¦¡!';
        return;
      }

      // à¦¸à¦¾à¦•à¦¸à§‡à¦¸ à¦¹à¦²à§‡ à¦¡à¦¾à¦Ÿà¦¾ à¦¸à§‡à¦Ÿ à¦•à¦°à§‡ à¦•à§‹à¦°à§à¦¸ à¦ªà§‡à¦œà§‡ à¦°à¦¿à¦¡à¦¾à¦‡à¦°à§‡à¦•à§à¦Ÿ
      localStorage.setItem('isLoggedIn', 'true');
      localStorage.setItem('currentUser', email);
      window.location.replace('course.html');
    });

    // à§«. à¦¸à¦¾à¦‡à¦¨ à¦†à¦ª à¦¹à§à¦¯à¦¾à¦¨à§à¦¡à¦²à¦¾à¦°
    document.getElementById('signup-form').addEventListener('submit', (e) => {
      e.preventDefault();
      const fullName = document.getElementById('signup-name').value.trim();
      const email = document.getElementById('signup-email').value.trim();
      const password = document.getElementById('signup-password').value;

      if (localStorage.getItem(email)) {
        document.getElementById('signup-email-error').textContent = 'à¦à¦‡ à¦‡à¦®à§‡à¦‡à¦²à¦Ÿà¦¿ à¦†à¦—à§‡ à¦¥à§‡à¦•à§‡à¦‡ à¦†à¦›à§‡!';
        return;
      }

      const userData = { fullName, email, password };
      localStorage.setItem(email, JSON.stringify(userData));
      
      document.getElementById('signup-success').textContent = 'âœ“ à¦…à§à¦¯à¦¾à¦•à¦¾à¦‰à¦¨à§à¦Ÿ à¦¤à§ˆà¦°à¦¿ à¦¹à§Ÿà§‡à¦›à§‡! à¦²à¦—à¦‡à¦¨ à¦¹à¦šà§à¦›à§‡...';

      setTimeout(() => {
        localStorage.setItem('isLoggedIn', 'true');
        localStorage.setItem('currentUser', email);
        window.location.replace('course.html');
      }, 1500);
    });
     </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9ca0c1cf961cfc55',t:'MTc3MDQ0NDk3MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html><!-- SECURITY GATEKEEPER - Place this in <head> of protected pages -->
